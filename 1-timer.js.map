{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport iconOk from '../img/check.svg';\nimport iconWarning from '../img/warning.svg';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  startBtn: document.querySelector('[data-start]'),\n  inputEl: document.querySelector('#datetime-picker'),\n  dataDaysEl: document.querySelector('[data-days]'),\n  dataHoursEl: document.querySelector('[data-hours]'),\n  dataMinutesEl: document.querySelector('[data-minutes]'),\n  dataSecondsEl: document.querySelector('[data-seconds]'),\n};\nlet userSelectedDate = '';\nlet intervalId = null;\nrefs.startBtn.disabled = true;\n\nconst msgOk = {\n  title: 'OK',\n  titleColor: '#fff',\n  message: 'Timer started!',\n  messageColor: '#fff',\n  backgroundColor: '#59a10d',\n  iconUrl: iconOk,\n  iconColor: '#fff',\n  position: 'topRight',\n  timeout: 3000,\n};\n\nconst msgWarning = {\n  title: 'Error',\n  titleColor: '#fff',\n  message: 'Please choose a date in the future',\n  messageColor: '#fff',\n  backgroundColor: '#ef4040',\n  iconUrl: iconWarning,\n  iconColor: '#fff',\n  position: 'topRight',\n};\n\nconst msgFinish = {\n  title: 'Done',\n  titleColor: '#fff',\n  message: 'Countdown finished!',\n  messageColor: '#fff',\n  backgroundColor: '#59a10d',\n  iconUrl: iconOk,\n  iconColor: '#fff',\n  position: 'topRight',\n  timeout: 3000,\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    if (selectedDates.length > 0) {\n      const selectedDate = selectedDates[0];\n      if (selectedDate <= new Date()) {\n        iziToast.error(msgWarning);\n        return;\n      }\n      userSelectedDate = selectedDate;\n      refs.startBtn.disabled = false;\n      if (intervalId) {\n        clearInterval(intervalId);\n        intervalId = null;\n      }\n    }\n  },\n};\n\nfunction startTimer() {\n  refs.startBtn.disabled = true;\n  refs.inputEl.disabled = true;\n\n  iziToast.success(msgOk);\n\n  intervalId = setInterval(() => {\n    const countTime = userSelectedDate - Date.now();\n    if (countTime <= 0) {\n      iziToast.success(msgFinish);\n      clearInterval(intervalId);\n      intervalId = null;\n      refs.inputEl.disabled = false;\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(countTime);\n    refs.dataDaysEl.textContent = String(days).padStart(2, '0');\n    refs.dataHoursEl.textContent = String(hours).padStart(2, '0');\n    refs.dataMinutesEl.textContent = String(minutes).padStart(2, '0');\n    refs.dataSecondsEl.textContent = String(seconds).padStart(2, '0');\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const sec = 1000;\n  const minute = sec * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / sec);\n\n  return { days, hours, minutes, seconds };\n}\n\nrefs.startBtn.addEventListener('click', startTimer);\nflatpickr(refs.inputEl, options);\n"],"names":["refs","userSelectedDate","intervalId","msgOk","iconOk","msgWarning","iconWarning","msgFinish","options","selectedDates","selectedDate","iziToast","startTimer","countTime","days","hours","minutes","seconds","convertMs","ms","flatpickr"],"mappings":"mJAOA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,cAAc,EAC/C,QAAS,SAAS,cAAc,kBAAkB,EAClD,WAAY,SAAS,cAAc,aAAa,EAChD,YAAa,SAAS,cAAc,cAAc,EAClD,cAAe,SAAS,cAAc,gBAAgB,EACtD,cAAe,SAAS,cAAc,gBAAgB,CACxD,EACA,IAAIC,EAAmB,GACnBC,EAAa,KACjBF,EAAK,SAAS,SAAW,GAEzB,MAAMG,EAAQ,CACZ,MAAO,KACP,WAAY,OACZ,QAAS,iBACT,aAAc,OACd,gBAAiB,UACjB,QAASC,EACT,UAAW,OACX,SAAU,WACV,QAAS,GACX,EAEMC,EAAa,CACjB,MAAO,QACP,WAAY,OACZ,QAAS,qCACT,aAAc,OACd,gBAAiB,UACjB,QAASC,EACT,UAAW,OACX,SAAU,UACZ,EAEMC,EAAY,CAChB,MAAO,OACP,WAAY,OACZ,QAAS,sBACT,aAAc,OACd,gBAAiB,UACjB,QAASH,EACT,UAAW,OACX,SAAU,WACV,QAAS,GACX,EAEMI,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,OAAS,EAAG,CAC5B,MAAMC,EAAeD,EAAc,CAAC,EACpC,GAAIC,GAAgB,IAAI,KAAQ,CAC9BC,EAAS,MAAMN,CAAU,EACzB,MACR,CACMJ,EAAmBS,EACnBV,EAAK,SAAS,SAAW,GACrBE,IACF,cAAcA,CAAU,EACxBA,EAAa,KAErB,CACG,CACH,EAEA,SAASU,GAAa,CACpBZ,EAAK,SAAS,SAAW,GACzBA,EAAK,QAAQ,SAAW,GAExBW,EAAS,QAAQR,CAAK,EAEtBD,EAAa,YAAY,IAAM,CAC7B,MAAMW,EAAYZ,EAAmB,KAAK,IAAK,EAC/C,GAAIY,GAAa,EAAG,CAClBF,EAAS,QAAQJ,CAAS,EAC1B,cAAcL,CAAU,EACxBA,EAAa,KACbF,EAAK,QAAQ,SAAW,GACxB,MACN,CAEI,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EAAUL,CAAS,EAC7Db,EAAK,WAAW,YAAc,OAAOc,CAAI,EAAE,SAAS,EAAG,GAAG,EAC1Dd,EAAK,YAAY,YAAc,OAAOe,CAAK,EAAE,SAAS,EAAG,GAAG,EAC5Df,EAAK,cAAc,YAAc,OAAOgB,CAAO,EAAE,SAAS,EAAG,GAAG,EAChEhB,EAAK,cAAc,YAAc,OAAOiB,CAAO,EAAE,SAAS,EAAG,GAAG,CACjE,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAG,EAE/D,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,CAEAjB,EAAK,SAAS,iBAAiB,QAASY,CAAU,EAClDQ,EAAUpB,EAAK,QAASQ,CAAO"}